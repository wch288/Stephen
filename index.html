<!DOCTYPE html>
<html lang="zh-HK">
<head>
<meta charset="UTF-8">
<title>æˆ‘å“‹å˜…å©šç¦®ç›¸ç°¿</title>
<style>
  body { font-family: "Microsoft JhengHei", sans-serif; background: #fff8f0; padding: 20px; }
  h1, h2, h3 { text-align: center; }
  .box { background: #fff; max-width: 420px; margin: auto; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
  input, button, select, textarea { width: 100%; padding: 8px; margin: 6px 0; font-size: 16px; }
  button { background: #ff6f91; color: white; border: none; cursor: pointer; border-radius:4px; }
  button:hover { background: #ff4f70; }
  img { max-width: 230px; margin: 5px; border-radius: 4px; }
  .gallery { text-align:center; }
  .admin-table { width: 100%; border-collapse: collapse; }
  .admin-table th, .admin-table td { border: 1px solid #ccc; padding: 8px; }
  .admin-table th { background: #ffe4ec; }
</style>
</head>
<body>

<h1>ğŸ‰ æ­¡è¿åšŸåˆ°æˆ‘å“‹å˜…å©šç¦®ç›¸ç°¿ ğŸ‰</h1>
<p style="text-align:center;"><a href="#" onclick="showAdminLogin()">ğŸ”‘ æ–°äººç™»å…¥ï¼ˆå¾Œå°ç®¡ç†ï¼‰</a></p>

<!-- ç™»å…¥ç•«é¢ -->
<div id="loginBox" class="box">
  <h3>è«‹è¼¸å…¥å§“ååŒå°ˆå±¬å¯†ç¢¼</h3>
  <input type="text" id="guestName" placeholder="ä½ å˜…å§“å">
  <input type="password" id="guestPass" placeholder="å°ˆå±¬å¯†ç¢¼">
  <button onclick="login()">å…¥å»ç‡ç›¸</button>
  <p id="errorMsg" style="color:red;"></p>
</div>

<!-- ç›¸ç°¿åŠäº’å‹•åŠŸèƒ½ -->
<div id="albumBox" style="display:none;">
  <h2 id="welcomeText"></h2>
  <div id="photoList" class="gallery"></div>
  <hr>

  <h3>ğŸ’¬ ç•™è¨€ç¥ç¦</h3>
  <textarea id="comment" placeholder="å¯«ä½ä½ å˜…ç¥ç¦..." rows="2"></textarea>
  <button onclick="sendComment()">é€å‡ºç•™è¨€</button>
  <div id="commentList" class="box" style="margin-top:10px; display:none;">
    <h4>ğŸ“œ å¤§å®¶å˜…ç•™è¨€</h4>
    <ul id="commentItems" style="list-style:none; padding-left:0;"></ul>
  </div>

  <hr>
  <h3>ğŸ–¨ï¸ ç”³è«‹æ²–æ›¬</h3>
  <label>æ€å°ºå¯¸ï¼š
    <select id="printSize">
      <option>4R</option>
      <option>5R</option>
      <option>8R</option>
      <option>11R</option>
    </select>
  </label>
  <label>æ•¸é‡ï¼š
    <input type="number" id="printQty" min="1" value="1">
  </label>
  <input type="text" id="contact" placeholder="ä½ å˜…WhatsApp/é›»è©±">
  <button onclick="sendPrintRequest()">æäº¤æ²–æ›¬ç”³è«‹</button>
</div>

<!-- å¾Œå°ç™»å…¥ -->
<div id="adminLogin" class="box" style="display:none;">
  <h3>ç®¡ç†å“¡ç™»å…¥</h3>
  <input type="password" id="adminPass" placeholder="è¼¸å…¥ç®¡ç†å“¡å¯†ç¢¼">
  <button onclick="adminLogin()">ç™»å…¥å¾Œå°</button>
  <p id="adminError" style="color:red;"></p>
</div>

<!-- å¾Œå°é¢æ¿ -->
<div id="adminPanel" style="display:none;">
  <h2>ğŸ’¼ å¾Œå°ç®¡ç†</h2>

  <h3>ğŸ“œ ç•™è¨€ç®¡ç†</h3>
  <table class="admin-table">
    <thead><tr><th>ç•™è¨€å…§å®¹</th><th>æ“ä½œ</th></tr></thead>
    <tbody id="adminComments"></tbody>
  </table>

  <h3>ğŸ–¨ï¸ æ²–æ›¬ç”³è«‹ç®¡ç†</h3>
  <table class="admin-table">
    <thead><tr><th>å°ºå¯¸</th><th>æ•¸é‡</th><th>è¯çµ¡æ–¹æ³•</th><th>ç‹€æ…‹</th></tr></thead>
    <tbody id="adminPrints"></tbody>
  </table>
</div>

<script>
// ======== è³“å®¢è³‡æ–™è¨­å®š ========
const userPhotos = {
  "é™³å°å§": { password: "GUEST001", photos: ["https://via.placeholder.com/300x200?text=é™³å°å§1","https://via.placeholder.com/300x200?text=é™³å°å§2"] },
  "æå…ˆç”Ÿ": { password: "GUEST002", photos: ["https://via.placeholder.com/300x200?text=æå…ˆç”Ÿ1","https://via.placeholder.com/300x200?text=æå…ˆç”Ÿ2"] }
};

// ======== å…¨åŸŸä¿å­˜è³‡æ–™ ========
let allComments = []; // {name, text}
let allPrints = [];   // {name, size, qty, contact, status}

// ======== è³“å®¢ç™»å…¥ ========
function login() {
  const name = document.getElementById("guestName").value.trim();
  const pass = document.getElementById("guestPass").value.trim();
  const errorMsg = document.getElementById("errorMsg");
  errorMsg.textContent = "";

  if (userPhotos[name] && userPhotos[name].password === pass) {
    document.getElementById("loginBox").style.display = "none";
    document.getElementById("albumBox").style.display = "block";
    document.getElementById("welcomeText").textContent = `ğŸ˜ƒ æ­¡è¿ ${name}ï¼å‘¢åº¦ä¿‚ä½ å˜…å°ˆå±¬ç›¸ç°¿`;

    const list = document.getElementById("photoList");
    list.innerHTML = "";
    userPhotos[name].photos.forEach(url => {
      const img = document.createElement("img");
      img.src = url;
      list.appendChild(img);
    });

    // æš«å­˜è³“å®¢åï¼ˆæ–¹ä¾¿ä¹‹å¾Œç•™è¨€ & æ²–æ›¬ç”³è«‹ï¼‰
    document.getElementById("albumBox").dataset.guestName = name;

  } else {
    errorMsg.textContent = "âŒ å§“åæˆ–å¯†ç¢¼å””æ­£ç¢ºï¼Œè«‹å†è©¦ä¸€æ¬¡";
  }
}

// ======== ç•™è¨€åŠŸèƒ½ ========
function sendComment() {
  const name = document.getElementById("albumBox").dataset.guestName;
  const comment = document.getElementById("comment").value.trim();
  if (!comment) return alert("è«‹è¼¸å…¥ç•™è¨€å…§å®¹");

  allComments.push({ name, text: comment });
  const li = document.createElement("li");
  li.textContent = name + "ï¼š" + comment;
  document.getElementById("commentItems").appendChild(li);
  document.getElementById("commentList").style.display = "block";
  document.getElementById("comment").value = "";
  alert("âœ… ç•™è¨€å·²é€å‡ºï¼");
}

// ======== æ²–æ›¬ç”³è«‹åŠŸèƒ½ ========
function sendPrintRequest() {
  const name = document.getElementById("albumBox").dataset.guestName;
  const size = document.getElementById("printSize").value;
  const qty = document.getElementById("printQty").value;
  const contact = document.getElementById("contact").value.trim();
  if (!contact) return alert("è«‹è¼¸å…¥è¯çµ¡æ–¹å¼");

  allPrints.push({ name, size, qty, contact, status: "æœªè™•ç†" });
  alert(`âœ… å·²æ”¶åˆ°ä½ ç”³è«‹æ²–æ›¬ ${qty} å¼µ ${size} ç›¸ï¼Œæˆ‘å“‹æœƒç”¨ ${contact} è¯çµ¡ä½ ï¼`);
  document.getElementById("contact").value = "";
}

// ======== å¾Œå°ç™»å…¥ ========
function showAdminLogin() {
  document.getElementById("loginBox").style.display = "none";
  document.getElementById("albumBox").style.display = "none";
  document.getElementById("adminLogin").style.display = "block";
}
function adminLogin() {
  const pwd = document.getElementById("adminPass").value.trim();
  if (pwd === "admin123") {
    document.getElementById("adminLogin").style.display = "none";
    document.getElementById("adminPanel").style.display = "block";
    renderAdminData();
  } else {
    document.getElementById("adminError").textContent = "å¯†ç¢¼éŒ¯èª¤ï¼";
  }
}

// ======== å¾Œå°è³‡æ–™é¡¯ç¤º ========
function renderAdminData() {
  const commentTable = document.getElementById("adminComments");
  commentTable.innerHTML = "";
  allComments.forEach((c, index) => {
    commentTable.innerHTML += `<tr>
      <td>${c.name}ï¼š${c.text}</td>
      <td><button onclick="deleteComment(${index})">åˆªé™¤</button></td>
    </tr>`;
  });

  const printTable = document.getElementById("adminPrints");
  printTable.innerHTML = "";
  allPrints.forEach((p, index) => {
    printTable.innerHTML += `<tr>
      <td>${p.size}</td>
      <td>${p.qty}</td>
      <td>${p.contact}ï¼ˆ${p.name}ï¼‰</td>
      <td>${p.status} <button onclick="markDone(${index})">å®Œæˆ</button></td>
    </tr>`;
  });
}

// ======== å¾Œå°æ“ä½œ ========
function deleteComment(index) {
  allComments.splice(index, 1);
  renderAdminData();
}
function markDone(index) {
  allPrints[index].status = "å·²å®Œæˆ";
  renderAdminData();
}
</script>

</body>
</html>
